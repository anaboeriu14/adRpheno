% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/drug_atc.R
\name{add_atc_classification}
\alias{add_atc_classification}
\title{Add ATC classifications to medications}
\usage{
add_atc_classification(
  dataf,
  rxcui_col = "rxcui",
  new_col_name = NULL,
  unnest = FALSE,
  atc_level = "second",
  batch_size = 500,
  save_freq = 500,
  cache_dir = "cache",
  max_age_days = 30,
  retry_count = 3,
  batch_delay = 0.5
)
}
\arguments{
\item{dataf}{Data frame containing RxCUI values}

\item{rxcui_col}{Column with RxCUI values (default: "rxcui")}

\item{new_col_name}{Name for new column (default: auto-generated, e.g., "atc2_class")}

\item{unnest}{Create separate rows for multiple classes (default: FALSE)}

\item{atc_level}{ATC level: "first", "second" (default), "third", or "fourth"}

\item{batch_size}{Items per batch (default: 500)}

\item{save_freq}{Save cache every N items (default: 500)}

\item{cache_dir}{Cache directory (default: "cache")}

\item{max_age_days}{Cache expiration in days (default: 30)}

\item{retry_count}{Retry attempts (default: 3)}

\item{batch_delay}{Seconds between batches (default: 0.5)}
}
\value{
Data frame with ATC classification column added
}
\description{
Retrieves WHO ATC classifications for medications using RxCUI codes.
}
\examples{
\dontrun{
df <- data.frame(med = c("atorvastatin", "metformin"),
                 rxcui = c("83367", "6809"))

# Simple usage
add_atc_classification(df)

# Different level
add_atc_classification(df, atc_level = "third")
}
}
