% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/drug_atc2.R
\name{add_atc2_classification}
\alias{add_atc2_classification}
\title{Add ATC2 therapeutic classifications to medications}
\usage{
add_atc2_classification(
  dataf,
  rxcui_col = "rxcui",
  new_col_name = "atc2_class",
  unnest = FALSE,
  batch_size = 200,
  save_freq = 50,
  cache_dir = "cache",
  max_age_days = 30,
  retry_count = 3,
  batch_delay = 2
)
}
\arguments{
\item{dataf}{Data frame containing RxCUI values}

\item{rxcui_col}{Character. Column name containing RxCUI values (default: "rxcui")}

\item{new_col_name}{Character. Name for the new ATC2 column (default: "atc2_class")}

\item{unnest}{Logical. If TRUE, creates separate rows for each ATC2 class;
if FALSE, combines multiple classes with semicolons (default: FALSE)}

\item{batch_size}{Integer. Number of RxCUIs per batch (default: 200)}

\item{save_freq}{Integer. Save cache every N items (default: 50)}

\item{cache_dir}{Character. Cache directory (default: "cache")}

\item{max_age_days}{Integer. Cache expiration in days (default: 30)}

\item{retry_count}{Integer. Number of retry attempts (default: 3)}

\item{batch_delay}{Numeric. Seconds between batches (default: 2)}
}
\value{
Data frame with ATC2 classifications added
}
\description{
This function takes a data frame with RxCUIs and adds ATC2 therapeutic
classifications. ATC codes classify drugs by their therapeutic use.
}
\examples{
\dontrun{
# Basic usage (nested - multiple classes in one cell)
df_with_atc2 <- add_atc2_classification(df_with_rxcuis)

# Unnested (separate row for each ATC2 class)
df_unnested <- add_atc2_classification(df_with_rxcuis, unnest = TRUE)

# Custom column names
df_custom <- add_atc2_classification(df, rxcui_col = "my_rxcui",
                                    new_col_name = "therapeutic_class")
}
}
